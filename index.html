<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ironman 2023 Project</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Roboto', sans-serif;
            background-color: #F1FAEE;
            color: #1D3557;
            height: 100%;
            overflow-x: hidden;
        }

        * {
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        header {
            background-color: #1D3557;
            color: #F1FAEE;
            padding: 20px;
            text-align: center;
            letter-spacing: 2px;
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        header h1 {
            margin: 0;
            font-size: 2.5em;
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
        }

        .open-btn {
            font-size: 20px;
            cursor: pointer;
            background-color: #E63946;
            color: #F1FAEE;
            border: none;
            padding: 15px;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 4;
            border-radius: 50%;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.3s ease;
        }

        .open-btn:hover {
            background-color: #457B9D;
            transform: scale(1.1);
        }

        .sidebar {
            height: 100%;
            width: 250px;
            position: fixed;
            top: 0;
            left: -250px;
            background-color: #E63946;
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: 60px;
            font-family: 'Oswald', sans-serif;
            z-index: 3;
        }

        .sidebar a {
            padding: 15px 20px;
            text-decoration: none;
            font-size: 1.8em;
            color: #F1FAEE;
            display: block;
            transition: 0.3s;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .sidebar a:hover {
            background-color: #457B9D;
            padding-left: 25px;
        }

        .sidebar a.close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.8em;
            padding: 5px 10px;
        }

        .main-content {
            margin-left: 0;
            padding: 40px;
            transition: margin-left 0.5s ease;
            min-height: calc(100vh - 160px);
        }

        .content {
            opacity: 0;
            transition: opacity 0.5s ease, transform 0.5s ease;
            transform: translateY(20px);
            padding: 40px 0;
            text-align: center;
            display: none;
        }

        .content.active {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }

        .content h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            color: #1D3557;
        }

        .description-box {
            background-color: #A8DADC;
            color: #1D3557;
            padding: 20px;
            border-radius: 10px;
            margin: 40px 0;
            font-size: 1.2em;
            line-height: 1.6;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .description-box:hover {
            transform: scale(1.02);
        }

        /* Visualization Styles */
        .visualization-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .visualization-container {
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s ease;
            height: 500px;
            margin-bottom: 20px;
        }

        .visualization-container:hover {
            transform: translateY(-5px);
        }

        .visualization-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .visualization-title {
            background: #457B9D;
            color: #F1FAEE;
            padding: 10px;
            margin: 0;
            font-family: 'Oswald', sans-serif;
            font-size: 1.2em;
        }

        footer {
            background-color: #1D3557;
            color: #F1FAEE;
            text-align: center;
            padding: 20px;
            position: relative;
            width: 100%;
            z-index: 2;
        }

        #mySidebar.show {
            left: 0;
        }
        
        #main.active {
            margin-left: 250px;
        }

        .progress-bar {
            width: 0;
            height: 5px;
            background-color: #E63946;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 5;
        }

        .stat-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-top: 40px;
        }

        .stat-box {
            background-color: #457B9D;
            color: #F1FAEE;
            padding: 20px;
            border-radius: 10px;
            margin: 10px;
            width: 200px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .stat-box:hover {
            transform: translateY(-5px);
        }

        .stat-box h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .stat-box p {
            font-size: 2em;
            font-weight: bold;
        }

        .animate-number {
            display: inline-block;
        }

        @media screen and (max-width: 768px) {
            .sidebar {
                width: 200px;
                left: -200px;
            }
            .open-btn {
                left: 10px;
            }
            .stat-box {
                width: calc(50% - 20px);
            }
            .visualization-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="progress-bar" id="progressBar"></div>

    <header>
        <h1>Lake Placid Ironman 2023</h1>
    </header>

    <button class="open-btn" onclick="openNav()">&#9776;</button>

    <div id="mySidebar" class="sidebar">
        <a href="javascript:void(0)" class="close-btn" onclick="closeNav()">&#10006;</a>
        <a href="javascript:void(0)" onclick="openTab(event, 'intro')">Intro</a>
        <a href="javascript:void(0)" onclick="openTab(event, 'genetic_analysis')">Genetic Analysis</a>
        <a href="javascript:void(0)" onclick="openTab(event, 'body_composition')">Body Composition</a>
        <a href="javascript:void(0)" onclick="openTab(event, 'swim')">Swim</a>
        <a href="javascript:void(0)" onclick="openTab(event, 'bike')">Bike</a>
        <a href="javascript:void(0)" onclick="openTab(event, 'run')">Run</a>
        <a href="javascript:void(0)" onclick="openTab(event, 'diet_sleep')">Diet & Sleep</a>
        <a href="javascript:void(0)" onclick="openTab(event, 'final_thoughts')">Final Thoughts</a>
    </div>

    <div id="main" class="main-content">
        <!-- Intro Section -->
<div id="intro" class="content active">
    <h2 class="section-title">Introduction</h2>
    
    <!-- Personal Journey Overview -->
    <div class="description-box">
        <h3 style="color: #1D3557; margin-bottom: 15px;">My Ironman Journey</h3>
        <p>Welcome to my Lake Placid Ironman 2023 journey. This project documents my 6-month training and delves into the details of my improvement across 3 athletic events. </p>
    </div>

    <!-- Key Stats -->
    <div class="stat-container">
        <div class="stat-box">
            <h3>Total Training Days</h3>
            <p><span class="animate-number" data-value="180">0</span></p>
            <small>Over 6 months</small>
        </div>
        <div class="stat-box">
            <h3>Hours Trained</h3>
            <p><span class="animate-number" data-value="720">0</span></p>
            <small>~4 hours/day</small>
        </div>
        <div class="stat-box">
            <h3>Calories Burned</h3>
            <p><span class="animate-number" data-value="540,000">0</span></p>
            <small>During training</small>
        </div>
        <div class="stat-box">
            <h3>Total Distance</h3>
            <p><span class="animate-number" data-value="140">0</span></p>
            <small>Miles on race day</small>
        </div>
    </div>

    <!-- Course Overview -->
    <div class="course-overview">
        <h3 style="text-align: center; color: #1D3557; margin: 40px 0 20px;">The Lake Placid Challenge</h3>
        
        <div class="visualization-grid">
            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">Swim Course - Mirror Lake</h3>
                <div class="visualization-content">
                    <img src="course_maps/IM24_LP_CourseMap_Swim_081423_cc-1_large.webp" alt="Swim Course Map" class="visualization-image">
                </div>
                <div class="expanded-content">
                    <ul style="list-style: none; padding: 15px;">
                        <li>🏊‍♂️ Notes: Very beautiful sunrise as over 2000 athletes prepare for a long day ahead </li>
                        <li>💧 Two 1.2-mile loops</li>
                        <li>🌡️ Average water temp: 68-72°F</li>
                        <li>⏱️ Cut-off time: 2:20</li>
                    </ul>
                </div>
            </div>
            
            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">Bike Course - Adirondacks</h3>
                <div class="visualization-content">
                    <img src="course_maps/IM24_LP_CourseMap_Bike_081423_cc-1_large.webp" alt="Bike Course Map" class="visualization-image">
                </div>
                <div class="expanded-content">
                    <ul style="list-style: none; padding: 15px;">
                        <li>🚴‍♂️ Notes: Hilly roads with lots of speed on descents and effort on climbing - occasional downpours of rain made for a difficult section  </li>
                        <li>⛰️ Elevation gain: 6,700 feet</li>
                        <li>🔄 Two 56-mile loops</li>
                        <li>⏱️ Cut-off time: 10:30</li>
                    </ul>
                </div>
            </div>
            
            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">Run Course - Lake Placid</h3>
                <div class="visualization-content">
                    <img src="course_maps/IM24_LP_CourseMap_Run_081423_cc-1_large.webp" alt="Run Course Map" class="visualization-image">
                </div>
                <div class="expanded-content">
                    <ul style="list-style: none; padding: 15px;">
                        <li>🏃‍♂️ Notes: Mild hills with large crowds cheering you on as you begin your final loop</li>
                        <li>⛰️ Elevation gain: 1,500 feet</li>
                        <li>🔄 Two 13.1-mile loops</li>
                        <li>⏱️ Cut-off time: 17:00</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .course-content {
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    .course-details {
        background: rgba(29, 53, 87, 0.05);
        border-top: 3px solid #457B9D;
        margin-top: auto;
    }

    .course-details ul li {
        margin: 8px 0;
        font-size: 0.9em;
        color: #1D3557;
    }

    .stat-box small {
        display: block;
        margin-top: 5px;
        color: #F1FAEE;
        font-size: 0.8em;
        opacity: 0.8;
    }

    .description-box {
        max-width: 800px;
        margin: 0 auto 40px;
        line-height: 1.8;
    }

    .description-box p {
        font-size: 1.1em;
    }

    .visualization-image {
        width: 100%;
        height: 100%;
        object-fit: contain;
    }
</style>


        <!-- Genetic Analysis Section -->
<div id="genetic_analysis" class="content">
    <h2 class="section-title">GENETIC ANALYSIS</h2>
    
    <div class="description-box genetic-overview">
        <p>This section delves into my genetic makeup based off SNP genotyping (via selfdecode). I was able to play around with the data and make a mock report by creating a in house SNP database based on specific genetic markers that influence athletic performance and attributing "scores" to each associated gene. </p>
    </div>
    
    <!-- Performance Report Container -->
    <div class="visualization-container report-container expandable-viz">
        <h3 class="visualization-title">Genetic Performance Report</h3>
        <div class="visualization-content">
            <iframe 
                class="visualization-iframe preview-mode" 
                src="assets/visualizations/genetic_analysis/genetic_performance_report.html"
                scrolling="no"
            ></iframe>
        </div>
        <div class="expanded-content">
            <p>Scores were calculated by taking 20 known gene variations associated with athletic performance via scientific literature and comparing my own SNP data through normalized scoring. A future balanced score will be added to determine the overal flexibility of athletic performance.  

                2 = optimal score 
                1 = Neutral variant
                0.5 = less than optimal variant 
                0.1 = Non-optimal variant </p>
        </div>
    </div>
 
    <!-- Athletics Overview Container -->
    <div class="visualization-container overview-container expandable-viz">
        <h3 class="visualization-title">Athletic Genetics Overview</h3>
        <div class="visualization-content">
            <iframe 
                class="visualization-iframe preview-mode" 
                src="assets/visualizations/genetic_analysis/athletic_genetics_overview_20241024_132540.html"
                scrolling="no"
            ></iframe>
        </div>
        <div class="expanded-content">
            <p>This detailed overview analyzes key genetic markers that influence athletic performance. The analysis includes the following:</p>

        </li>1. Effect Size vs. Endurance/Power Bias: Show a mix of both power and endurance potential, with strong markers like ACTN3 favoring power and ACE favoring endurance performance</li>
        </li>2. Distribution of Genentic Pathways: All genes analyzed have strong scientific backing, with evidence quality scores above 75%, </li> 
        </li>3. Evidence Quality by Gene: Most genes are involved in energy metabolism and muscle composition</li>
        </li>4. Genes Ranked by Effect Size: ACTN3 and ACE have the strongest influence on athletic performance, with other genes providing moderate to significant effects</li>
        </div>
    </div>
 </div>
 
 <style>
 .section-title {
    text-align: center;
    color: #1D3557;
    font-size: 2.5em;
    margin-bottom: 30px;
    text-transform: uppercase;
    letter-spacing: 2px;
 }
 
 .genetic-overview {
    background-color: #A8DADC;
    border-radius: 10px;
    padding: 25px;
    margin: 40px auto;
    max-width: 1000px;
    text-align: center;
    font-size: 1.1em;
    line-height: 1.6;
    color: #1D3557;
 }
 
 .visualization-container {
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    margin: 60px auto;
    transition: transform 0.3s ease;
    width: 95%;
    max-width: 1800px;
    position: relative;
 }
 
 .visualization-title {
    background: #457B9D;
    color: #F1FAEE;
    padding: 15px;
    margin: 0;
    font-size: 1.2em;
    text-align: center;
 }
 
 .visualization-content {
    position: relative;
    overflow: hidden;
    background: white;
    height: 100%;
 }
 
 .expandable-viz {
    cursor: pointer;
 }
 
 .expandable-viz:hover {
    transform: scale(1.02);
 }
 
 .expanded-content {
    display: none;
    padding: 20px;
    background: #f8f9fa;
    border-top: 1px solid #dee2e6;
 }
 
 .visualization-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    overflow: auto;
 }
 
 .modal-content {
    position: relative;
    background: white;
    margin: 40px auto;
    padding: 30px;
    width: 95%;
    max-width: 1800px;
    min-height: 800px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
 }
 
 .close-modal {
    position: absolute;
    right: 20px;
    top: 20px;
    font-size: 24px;
    cursor: pointer;
    color: #1D3557;
    z-index: 1100;
 }
 
 .report-container {
    height: 450px;
 }
 
 .overview-container {
    height: 450px;
 }
 
 .visualization-iframe {
    width: 100%;
    height: 100%;
    border: none;
 }
 
 .visualization-iframe.preview-mode {
    width: 100%;
    height: 150%;
    border: none;
    position: absolute;
    top: 0;
    left: 0;
    transform: scale(0.8) translateY(-15%);
    transform-origin: top center;
 }
 
 .modal .visualization-iframe {
    height: 1200px;
    position: relative;
    transform: none;
    overflow-y: auto;
 }
 
 .fade-in {
    animation: fadeIn 0.3s ease-in;
 }
 
 @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
 }
 
 @media (max-width: 1400px) {
    .report-container {
        height: 400px;
    }
    
    .overview-container {
        height: 400px;
    }
    
    .visualization-iframe.preview-mode {
        transform: scale(0.75) translateY(-15%);
    }
 }
 
 @media (max-width: 768px) {
    .report-container {
        height: 350px;
    }
    
    .overview-container {
        height: 350px;
    }
    
    .visualization-iframe.preview-mode {
        transform: scale(0.7) translateY(-15%);
    }
 
    .section-title {
        font-size: 2em;
    }
 
    .genetic-overview {
        margin: 15px;
        padding: 20px;
        font-size: 1em;
    }
 
    .modal-content {
        width: 98%;
        margin: 10px auto;
        padding: 15px;
    }
 }
 </style>
 
 <script>
 document.addEventListener('DOMContentLoaded', function() {
    const expandableVizs = document.querySelectorAll('.expandable-viz');
    
    expandableVizs.forEach(viz => {
        viz.addEventListener('click', function() {
            const modal = document.createElement('div');
            modal.className = 'visualization-modal fade-in';
            
            const title = this.querySelector('.visualization-title').cloneNode(true);
            const content = this.querySelector('.visualization-content').cloneNode(true);
            const description = this.querySelector('.expanded-content').cloneNode(true);
            
            // Update iframe for modal view
            const iframe = content.querySelector('iframe');
            if (iframe) {
                iframe.classList.remove('preview-mode');
                iframe.scrolling = 'auto';
                iframe.style.height = '1200px';
                iframe.style.position = 'relative';
                iframe.style.transform = 'none';
            }
            
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close-modal">&times;</span>
                    ${title.outerHTML}
                    ${content.outerHTML}
                    ${description.outerHTML}
                </div>
            `;
            
            document.body.appendChild(modal);
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            modal.querySelector('.expanded-content').style.display = 'block';
            
            const closeBtn = modal.querySelector('.close-modal');
            closeBtn.onclick = function() {
                modal.classList.remove('fade-in');
                setTimeout(() => {
                    modal.remove();
                    document.body.style.overflow = 'auto';
                }, 300);
            };
            
            modal.onclick = function(e) {
                if (e.target === modal) {
                    closeBtn.click();
                }
            };
        });
    });
 });
 </script>

        <!-- Body Composition Section -->
<div id="body_composition" class="content">
    <h2 class="section-title">BODY COMPOSITION</h2>
    
    <div class="description-box">
        <p>This section explores how my body composition evolved throughout my Ironman training, with a focus on metrics like BMI, body fat percentage, lean mass, and cardiovascular indicators.</p>
    </div>
    
    <!-- Key Metrics Stats -->
    <div class="stat-container">
        <div class="stat-box">
            <h3>BMI</h3>
            <p><span class="animate-number" data-value="22.5">0</span></p>
            <small>Healthy Range</small>
        </div>
        <div class="stat-box">
            <h3>Body Fat %</h3>
            <p><span class="animate-number" data-value="12">0</span></p>
            <small>Athletic Range</small>
        </div>
        <div class="stat-box">
            <h3>Lean Mass (kg)</h3>
            <p><span class="animate-number" data-value="65">0</span></p>
            <small>Peak Training</small>
        </div>
    </div>

    <!-- Body Composition Trends -->
    <div class="metrics-section">
        <h3 class="subsection-title">Body Composition Analysis</h3>
        <div class="visualization-grid">
            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">Body Fat Percentage Trends</h3>
                <div class="visualization-content">
                    <iframe 
                        class="visualization-iframe preview-mode" 
                        src="assets/visualizations/body_composition/body_fat_percentage_over_time_20241024_134949.html"
                        scrolling="no"
                    ></iframe>
                </div>
                <div class="expanded-content">
                    <p>Trend analysis of body fat percentage - I still remember the mcdonalds nuggest and fries after - clearly had a little rebound after the event but cleaned up in the following weeks.</p>
                </div>
            </div>

            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">Body Mass Evolution</h3>
                <div class="visualization-content">
                    <iframe 
                        class="visualization-iframe preview-mode" 
                        src="assets/visualizations/body_composition/body_mass_over_time_20241024_134949.html"
                        scrolling="no"
                    ></iframe>
                </div>
                <div class="expanded-content">
                    <p>Trend analysis of body mass with added target weight - identical trend but nice to see weight in pounds </p>
                </div>
            </div>

            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">Body Mass vs Body Fat</h3>
                <div class="visualization-content">
                    <iframe 
                        class="visualization-iframe preview-mode" 
                        src="assets/visualizations/body_composition/comparison_body_mass_body_fat_20241024_134949.html"
                        scrolling="no"
                    ></iframe>
                </div>
                <div class="expanded-content">
                    <p>Comparative analysis of body mass and body fat percentage relationships. Nothing out of order here.</p>
                </div>
            </div>

            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">Lean Body Mass Trends</h3>
                <div class="visualization-content">
                    <iframe 
                        class="visualization-iframe preview-mode" 
                        src="assets/visualizations/body_composition/lean_body_mass_over_time_20241024_134949.html"
                        scrolling="no"
                    ></iframe>
                </div>
                <div class="expanded-content">
                    <p>Tracking of lean body mass changes during the same period. I noticed the loss of bodyfat but also the loss of muscle mass - I was considerably weaker throughout my lifts and in retrospect would add more lifting to training diet.</p>
                </div>
            </div>

            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">Pro Height Distribution Analysis</h3>
                <div class="visualization-content">
                    <iframe 
                        class="visualization-iframe preview-mode" 
                        src="assets/visualizations/body_composition/height_distribution_20241024_135255.html"
                        scrolling="no"
                    ></iframe>
                </div>
                <div class="expanded-content">
                    <p>Height Distribution of pro triathletes.</p>
                </div>
            </div>

            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">Pro Body Mass Distribution</h3>
                <div class="visualization-content">
                    <iframe 
                        class="visualization-iframe preview-mode" 
                        src="assets/visualizations/body_composition/weight_distribution_20241024_135255.html"
                        scrolling="no"
                    ></iframe>
                </div>
                <div class="expanded-content">
                    <p>Weight Distribution of pro triathletes.</p>
                </div>
            </div>

            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">Pro Height vs Weight Analysis</h3>
                <div class="visualization-content">
                    <iframe 
                        class="visualization-iframe preview-mode" 
                        src="assets/visualizations/body_composition/height_weight_regression_20241024_135255.html"
                        scrolling="no"
                    ></iframe>
                </div>
                <div class="expanded-content">
                    <p>Graph compares height and weight distributions between PRO triathletes sourced from (protriathletes.org - orange dots) and Rio 2016 Olympian triathletes (teal dots), showing a moderate positive correlation (R²=0.59) between height and weight, with most elite athletes falling within a specific range of proportions - in this case olympians from 2016 seem to weigh less on average than the PRO triatheltes (given that the PRO triathlete data was sourced as recently as 2024 I think there might be a trend towards slightly heavier triathletes in the future)</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Cardiovascular Metrics -->
    <div class="metrics-section">
        <h3 class="subsection-title">Cardiovascular Performance</h3>
        <div class="visualization-grid">
            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">Heart Rate by Activity</h3>
                <div class="visualization-content">
                    <iframe 
                        class="visualization-iframe preview-mode" 
                        src="assets/visualizations/body_composition/heart_rate_vs_activity_type_20241024_135605.html"
                        scrolling="no"
                    ></iframe>
                </div>
                <div class="expanded-content">
                    <p>Analysis of heart rate patterns across different training activities. What I found that even though I was super out of breathing during swimming (poor technique plus inexperience) my heart rate was super low - this lead to me being in optimal fat burning range which explains that pretty fast drop from end of september to December where I was doing mostly swim training.</p>
                
                </li>Also interesting to note here that my range of heart rate during my runs was larger than any other activity - I think I feel most comfortable with the variation I can give me run workouts as that's the activity I'm most familar with</li>
                </div>
            </div>

            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">Base Heart Rate Zones</h3>
                <div class="visualization-content">
                    <iframe 
                        class="visualization-iframe preview-mode" 
                        src="assets/visualizations/body_composition/heart_rate_zones_20241024_140507.html"
                        scrolling="no"
                    ></iframe>
                </div>
                <div class="expanded-content">
                    <p>Distribution of training time across base heart rate zones</p>

                </li>Now this was super intersting for me to find out - I had initially calculated my heart rate zones with some website I found on the internet - only to find out there were multiple ways to calculate them after all the training.</li>
                </li>Based of the MHR (maximum heart rate) calculator I used online I had a fairly optimal distribution of time spent in zone 1/2 (endurance focused)</li>
                <p>However based on the Karvonen method I spent 76.8% of my time in Zone 1! I will definitely reassess my zone calculation for the next event <p>
                </li>Basic MHR formula: MHR = 220 - Age </li>
                <p>Targeted Heart Rate at 70% using Karvonen formula: THR = ((MHR - RHR) x 0.70) + RHR<p>
                </div>
            </div>

            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">Karvonen Heart Rate Zones</h3>
                <div class="visualization-content">
                    <iframe 
                        class="visualization-iframe preview-mode" 
                        src="assets/visualizations/body_composition/heart_rate_zones_Karvonen_20241024_140347.html"
                        scrolling="no"
                    ></iframe>
                </div>
                <div class="expanded-content">
                    <p>Karvonen heart rate zones in more dramatic bar graph fashion</p>
                </div>
            </div>

            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">MHR Heart Rate Zones</h3>
                <div class="visualization-content">
                    <iframe 
                        class="visualization-iframe preview-mode" 
                        src="assets/visualizations/body_composition/heart_rate_zones_MHR_20241024_140347.html"
                        scrolling="no"
                    ></iframe>
                </div>
                <div class="expanded-content">
                    <p>Maximum heart rate zones used during training</p>
                </div>
            </div>

            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">Time in Zones Analysis</h3>
                <div class="visualization-content">
                    <iframe 
                        class="visualization-iframe preview-mode" 
                        src="assets/visualizations/body_composition/time_spent_in_zones_all_20241024_140347.html"
                        scrolling="no"
                    ></iframe>
                </div>
                <div class="expanded-content">
                    <p>Detailed breakdown of time spent in different heart rate zones</p>
                </li>This is fun to see because you can zoom in week by week, month by month and see how long you were spending in a heart rate zone any given day - all the way to the right you can see the event day that essentially eclipses the entire graph </li> 
                </div>
            </div>

            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">HRV Trends</h3>
                <div class="visualization-content">
                    <iframe 
                        class="visualization-iframe preview-mode" 
                        src="assets/visualizations/body_composition/hrv_trend_20241024_141310.html"
                        scrolling="no"
                    ></iframe>
                </div>
                <div class="expanded-content">
                    <p>Heart rate variability trends throughout training period.</p>

                </li>Now let's get a litte more technical - plotted here is the rolling average of my HRV (heart rate variablity) over the course of roughly two years - with many more data points during the training cycle</li>
                <p>What can be noticed are sharp ups and downs during those training periods - peaks corresponding to good recovery days and troughs to hard training days/inadequate recovery/possible accumulation of fatigue<p>
                </li>Despite the volatility, the overall trend line (red dashed) continues its gradual decline - this is normal as the boody responds/adapts to progressive overload and potentially indicates a shift to a more sympathetic nervous system activity.</li>
                </li>In the future I would love to incorporate more HRV monitoring during my training - gives me a good sense of exactly how hard was a hard workout and my recovery time - the goal is to really master the occasional super-compensation (higher than baseline) to find the best windows for peak performance</li>
                </div>
            </div>

            <div class="visualization-container expandable-viz">
                <h3 class="visualization-title">VO2 Max Trends</h3>
                <div class="visualization-content">
                    <iframe 
                        class="visualization-iframe preview-mode" 
                        src="assets/visualizations/body_composition/vo2_max_trend_20241024_141609.html"
                        scrolling="no"
                    ></iframe>
                </div>
                <div class="expanded-content">
                    <p>Progression of VO2 Max measurements during training</p>
                <p>I would take this graph with alot of salt being that its coming from apple watch data - but it does show I normally have a stable VO2 max oof around 55ml/min/kg and the training shock lowered that to roughly 49ml/min/kg and then gradually improved<p>
                </li>The classic "train-adapt-improve" cycle</li>
                </div>
            </div>
        </div>
    </div>
</div>
        
<style>
    .section-title {
        text-align: center;
        color: #1D3557;
        font-size: 2.5em;
        margin-bottom: 30px;
        text-transform: uppercase;
        letter-spacing: 2px;
    }
    
    .subsection-title {
        text-align: center;
        color: #1D3557;
        font-size: 1.8em;
        margin: 40px 0 20px;
        letter-spacing: 1px;
    }
    
    .description-box {
        background-color: #A8DADC;
        border-radius: 10px;
        padding: 25px;
        margin: 20px auto;
        max-width: 800px;
        text-align: center;
        font-size: 1.1em;
        line-height: 1.6;
        color: #1D3557;
    }
    
    /* Stats Styling */
    .stat-container {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 20px;
        margin: 40px 0;
    }
    
    .stat-box {
        background-color: #457B9D;
        color: #F1FAEE;
        padding: 25px 40px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        min-width: 200px;
    }
    
    .stat-box h3 {
        margin-bottom: 10px;
        font-size: 1.2em;
    }
    
    .stat-box p {
        font-size: 2.2em;
        font-weight: bold;
        margin: 10px 0;
    }
    
    .stat-box small {
        display: block;
        opacity: 0.8;
        font-size: 0.9em;
        margin-top: 5px;
    }
    
    /* Visualization Grid Styling */
    .metrics-section {
        margin: 60px 0;
    }
    
    .visualization-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }
    
    .visualization-container {
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        height: 350px;
        position: relative;
    }
    
    .visualization-title {
        background: #457B9D;
        color: #F1FAEE;
        padding: 15px;
        margin: 0;
        font-size: 1.2em;
        text-align: center;
    }
    
    .visualization-content {
        position: relative;
        overflow: hidden;
        background: white;
        height: 100%;
    }
    
    /* Expandable Visualization Styling */
    .expandable-viz {
        cursor: pointer;
        transition: transform 0.3s ease;
    }
    
    .expandable-viz:hover {
        transform: scale(1.02);
    }
    
    .expanded-content {
        display: none;
        padding: 20px;
        background: #f8f9fa;
        border-top: 1px solid #dee2e6;
    }
    
    .visualization-iframe {
        width: 100%;
        height: 100%;
        border: none;
    }
    
    .visualization-iframe.preview-mode {
        width: 100%;
        height: 150%;
        border: none;
        position: absolute;
        top: 0;
        left: 0;
        transform: scale(0.7) translateY(-20%);
        transform-origin: top center;
    }
    
    /* Modal Styling */
    .visualization-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        overflow: auto;
    }
    
    .modal-content {
        position: relative;
        background: white;
        margin: 40px auto;
        padding: 20px;
        width: 80%;
        max-width: 1200px; /* Smaller max-width for better visibility */
        min-height: 600px; /* Reduced height for full view */
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    .close-modal {
        position: absolute;
        right: 20px;
        top: 20px;
        font-size: 24px;
        cursor: pointer;
        color: #1D3557;
        z-index: 1100;
    }
    
    .fade-in {
        animation: fadeIn 0.3s ease-in;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    /* Responsive Design */
    @media (max-width: 1400px) {
        .visualization-grid {
            grid-template-columns: 1fr;
        }
        
        .visualization-container {
            height: 300px;
        }
        
        .visualization-iframe.preview-mode {
            transform: scale(0.65) translateY(-20%);
        }
    }
    
    @media (max-width: 768px) {
        .stat-box {
            width: 100%;
            max-width: 300px;
        }
        
        .visualization-container {
            height: 250px;
        }
        
        .visualization-iframe.preview-mode {
            transform: scale(0.6) translateY(-20%);
        }
    
        .section-title {
            font-size: 2em;
        }
    
        .modal-content {
            width: 95%;
            margin: 10px auto;
            padding: 15px;
            min-height: 500px; /* Adjusted for smaller screens */
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Number Animation
        const animateNumbers = document.querySelectorAll('.animate-number');
        
        animateNumbers.forEach(number => {
            const targetValue = parseFloat(number.dataset.value);
            const duration = 2000; // 2 seconds
            const steps = 60;
            const stepValue = targetValue / steps;
            let currentStep = 0;
            let currentValue = 0;
            
            const interval = setInterval(() => {
                currentStep++;
                currentValue += stepValue;
                
                if (currentStep === steps) {
                    currentValue = targetValue;
                    clearInterval(interval);
                }
                
                number.textContent = Math.round(currentValue);
            }, duration / steps);
        });
    
        // Expandable Visualizations
        const expandableVizs = document.querySelectorAll('.expandable-viz');
        
        expandableVizs.forEach(viz => {
            viz.addEventListener('click', function() {
                const modal = document.createElement('div');
                modal.className = 'visualization-modal fade-in';
                
                const title = this.querySelector('.visualization-title').cloneNode(true);
                const content = this.querySelector('.visualization-content').cloneNode(true);
                const description = this.querySelector('.expanded-content').cloneNode(true);
                
                // Update iframe for modal view
                const iframe = content.querySelector('iframe');
                if (iframe) {
                    iframe.classList.remove('preview-mode');
                    iframe.scrolling = 'auto';
                    iframe.style.height = '800px'; // Smaller height for better fit
                    iframe.style.position = 'relative';
                    iframe.style.transform = 'none';
                }
                
                modal.innerHTML = `
                    <div class="modal-content">
                        <span class="close-modal">&times;</span>
                        ${title.outerHTML}
                        ${content.outerHTML}
                        ${description.outerHTML}
                    </div>
                `;
                
                document.body.appendChild(modal);
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
                
                modal.querySelector('.expanded-content').style.display = 'block';
                
                const closeBtn = modal.querySelector('.close-modal');
                closeBtn.onclick = function() {
                    modal.classList.remove('fade-in');
                    setTimeout(() => {
                        modal.remove();
                        document.body.style.overflow = 'auto';
                    }, 300);
                };
                
                modal.onclick = function(e) {
                    if (e.target === modal) {
                        closeBtn.click();
                    }
                };
            });
        });
    });
</script>


        <!-- Swim Section -->
<div id="swim" class="content">
    <h2 class="section-title">Swim Performance</h2>
    <div class="description-box">
        <p>An analysis of my swim performance during the Ironman training, focusing on improvements in pace, distance, and technique.</p>
    </div>

    <div class="visualization-grid">
        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Performance Metrics</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/swim/metrics_comparison.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Comparative metrics across swim training sessions.</p>
            </div>
        </div>
       
        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Body Angle Analysis</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/swim/body_angle_analysis.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Examination of body angle changes during swim sessions.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Wrist Angle Analysis</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/swim/wrist_position_analysis.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Examination of wrist angle changes during swim sessions.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">DPS and SWOLF Trends</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/swim/avg_dps_swolf_over_time.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Analysis of DPS (Distance Per Stroke) and SWOLF (Swim Golf) trends over time.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Energy Expenditure</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/swim/calories_burned_total_distance.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Correlation of calories burned with total swimming distance.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Stroke Analysis</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/swim/duration_avg_stroke_count_over_time.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Analysis of stroke count changes throughout training.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Stroke Count Timeline</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/swim/duration_stroke_count_over_time.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Timeline of stroke count during swim sessions.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Interval Analysis</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/swim/interval_distance_stroke_count_over_time.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Breakdown of swim intervals by distance and stroke count.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Form Analysis 1</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/swim/key_frame_comparison_1.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Key frame comparison for form analysis (session 1).</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Form Analysis 2</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/swim/key_frame_comparison_2.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Key frame comparison for form analysis (session 2).</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Form Analysis 3</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/swim/key_frame_comparison_3.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Key frame comparison for form analysis (session 3).</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Form Analysis 4</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/swim/key_frame_comparison_4.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Key frame comparison for form analysis (session 4).</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Pace and Stroke Rate</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/swim/pace_avg_stroke_rate_over_time.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Analysis of pace and average stroke rate over time.</p>
            </div>
        </div>
    </div>
</div>


        <!-- Bike Section -->
<div id="bike" class="content">
    <h2 class="section-title">Bike Performance</h2>
    <div class="description-box">
        <p>A deep dive into my biking sessions, covering distance, power, and cadence trends throughout training.</p>
    </div>

    <div class="visualization-grid">
        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Activity Distribution</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/bike/activity_counts.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Overview of the distribution of biking activities throughout training.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Power Analysis</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/bike/avg_power.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Analysis of average power output during biking sessions.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Correlation Analysis</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/bike/corr_matrix.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Correlation matrix showing relationships between various biking metrics.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Training Stress Score</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/bike/cumulative_tss.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Cumulative Training Stress Score (TSS) over the training period.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Metric Distribution</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/bike/distribution.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Distribution of various biking metrics such as speed, power, and cadence.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Duration Analysis</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/bike/duration_distribution.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Analysis of session duration distributions across different biking workouts.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Training Intensity</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/bike/if_progression.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Progression of intensity factor (IF) over time to assess training load.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">TSS Distribution</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/bike/tss_distribution.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Distribution of Training Stress Score (TSS) across different sessions.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">TSS Over Time</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/bike/tss_if_over_time.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Trend of TSS and IF over the training period.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Weekly Load</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/bike/weekly_training_load.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Weekly distribution of training load, indicating volume and intensity.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Workout Comparison</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/bike/workout_comparison.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Comparison of key metrics across different workout sessions.</p>
            </div>
        </div>
    </div>
</div>


        <!-- Run Section -->
<div id="run" class="content">
    <h2 class="section-title">Run Performance</h2>
    <div class="description-box">
        <p>This section focuses on my running performance, showcasing my progress in speed, endurance, and pacing strategies.</p>
    </div>

    <div class="visualization-grid">
        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Running Analysis</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/run/enhanced_running_data_analysis.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Comprehensive analysis of running metrics, including speed, endurance, and pacing.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Heart Rate and Cadence</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/run/heart_rate_cadence_over_time.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Tracking heart rate and cadence variations over time during runs.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Pace Analysis</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/run/pace_distance_over_time.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Analysis of pace trends and distance over the training period.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Weekly Distance</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/run/weekly_mileage_before_feb_25_2023.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Weekly mileage progression, highlighting endurance improvement.</p>
            </div>
        </div>
    </div>
</div>


        <!-- Diet & Sleep Section -->
<div id="diet_sleep" class="content">
    <h2 class="section-title">Diet & Sleep Analysis</h2>
    <div class="description-box">
        <p>This section covers the impact of my diet and sleep on my overall training performance and recovery.</p>
    </div>

    <div class="stat-container">
        <div class="stat-box">
            <h3>Average Calories Consumed</h3>
            <p><span class="animate-number" data-value="3000">0</span></p>
        </div>
        <div class="stat-box">
            <h3>Average Sleep (hours)</h3>
            <p><span class="animate-number" data-value="8">0</span></p>
        </div>
    </div>

    <div class="visualization-grid">
        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Macronutrient Distribution</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/diet_sleep/ironman_macronutrient_distribution_20241024_130557.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Analysis of macronutrient intake distribution over the training period.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Weight and Calories</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/diet_sleep/ironman_weight_and_calories_over_time_20241024_130557.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Correlation between weight changes and calorie intake over time.</p>
            </div>
        </div>

        <div class="visualization-container expandable-viz">
            <h3 class="visualization-title">Sleep Analysis</h3>
            <div class="visualization-content">
                <iframe class="visualization-iframe preview-mode" src="assets/visualizations/diet_sleep/sleep_data_analysis_20241024_130520.html"></iframe>
            </div>
            <div class="expanded-content">
                <p>Detailed analysis of sleep patterns and their impact on recovery.</p>
            </div>
        </div>
    </div>
</div>

<!-- Intro Section -->
<div id="final_thoughts" class="content active">
    <h2 class="section-title">Final Thoughts</h2>
    
    <!-- Personal Journey Overview -->
    <div class="description-box">
        <h3 style="color: #1D3557; margin-bottom: 15px;">My Ironman Journey</h3>
        <p>Looking back on training the data reflects a story of gradual progress and adaptation - understanding the process will be key in my future races - Thanks for joining </p>
    </div>

    <!-- Key Stats -->
    <div class="stat-container">
        <div class="stat-box">
            <h3>Total Training Days</h3>
            <p><span class="animate-number" data-value="180">0</span></p>
            <small>Over 6 months</small>
        </div>
        <div class="stat-box">
            <h3>Hours Trained</h3>
            <p><span class="animate-number" data-value="720">0</span></p>
            <small>~4 hours/day</small>
        </div>
        <div class="stat-box">
            <h3>Calories Burned</h3>
            <p><span class="animate-number" data-value="540000">0</span></p>
            <small>During training</small>
        </div>
        <div class="stat-box">
            <h3>Total Distance</h3>
            <p><span class="animate-number" data-value="140">0</span>mi</p>
            <small>Race day goal</small>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 Nobel Girmay - Ironman 2023</p>
    </footer>

    <script>
        // Lazy load iframes using Intersection Observer
        const observerOptions = {
            root: null,
            rootMargin: '50px',
            threshold: 0.1
        };
        
        const iframeObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const iframe = entry.target;
                    if (iframe.dataset.src) {
                        iframe.src = iframe.dataset.src;
                        iframe.removeAttribute('data-src');
                        iframe.classList.add('loaded');
                    }
                    observer.unobserve(iframe);
                }
            });
        }, observerOptions);
        
        // Convert existing iframes to lazy load
        document.querySelectorAll('.visualization-iframe').forEach(iframe => {
            const currentSrc = iframe.src;
            if (currentSrc) {
                iframe.dataset.src = currentSrc;
                iframe.removeAttribute('src');
                iframeObserver.observe(iframe);
            }
        });
        
        // Optimize animations with RequestAnimationFrame
        function optimizedAnimateNumbers() {
            const numbers = document.querySelectorAll('.animate-number:not(.animated)');
            numbers.forEach(num => {
                num.classList.add('animated');
                const finalValue = parseInt(num.dataset.value);
                const duration = 1000;
                const startTime = performance.now();
                
                const updateNumber = (currentTime) => {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    if (progress < 1) {
                        num.textContent = Math.floor(finalValue * progress).toLocaleString();
                        requestAnimationFrame(updateNumber);
                    } else {
                        num.textContent = finalValue.toLocaleString();
                    }
                };
                
                requestAnimationFrame(updateNumber);
            });
        }
        
        // Optimize scroll handling
        let scrollTimeout;
        const progressBar = document.getElementById('progressBar');
        window.addEventListener('scroll', () => {
            if (scrollTimeout) {
                window.cancelAnimationFrame(scrollTimeout);
            }
            
            scrollTimeout = window.requestAnimationFrame(() => {
                const winScroll = window.pageYOffset;
                const height = document.documentElement.scrollHeight - window.innerHeight;
                const scrolled = (winScroll / height) * 100;
                progressBar.style.width = `${scrolled}%`;
            });
        }, { passive: true });
        
        // Optimize tab switching
        function optimizedOpenTab(evt, tabName) {
            requestAnimationFrame(() => {
                document.querySelectorAll('.content').forEach(content => {
                    content.classList.remove('active');
                });
                
                const targetTab = document.getElementById(tabName);
                targetTab.classList.add('active');
                
                // Lazy load iframes in the new tab
                targetTab.querySelectorAll('.visualization-iframe').forEach(iframe => {
                    if (!iframe.src && iframe.dataset.src) {
                        iframeObserver.observe(iframe);
                    }
                });
                
                optimizedAnimateNumbers();
                closeNav();
            });
        }
        
        // Replace original openTab function
        window.openTab = optimizedOpenTab;
        
        // Optimize sidebar
        const sidebar = document.getElementById('mySidebar');
        const main = document.getElementById('main');
        
        function optimizedToggleNav() {
            requestAnimationFrame(() => {
                sidebar.classList.toggle('show');
                main.classList.toggle('active');
            });
        }
        
        // Replace original nav functions
        window.openNav = optimizedToggleNav;
        window.closeNav = optimizedToggleNav;
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            // Defer GSAP animations
            setTimeout(() => {
                if (typeof gsap !== 'undefined') {
                    gsap.from(".content h2", {duration: 0.5, opacity: 0, y: -30});
                    gsap.from(".description-box", {duration: 0.5, opacity: 0, y: 30, delay: 0.2});
                    gsap.from(".stat-box", {duration: 0.5, opacity: 0, y: 20, stagger: 0.1, delay: 0.3});
                }
            }, 100);
            
            optimizedAnimateNumbers();
        }, { passive: true });
        </script>
</body>
</html>    
